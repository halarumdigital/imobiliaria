CREATE TABLE IF NOT EXISTS scheduled_messages (
  id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
  company_id VARCHAR(36) NOT NULL,
  contact_list_id VARCHAR(36) NOT NULL,
  instance_ids JSON NOT NULL,
  message_type VARCHAR(20) NOT NULL,
  message_content TEXT NOT NULL,
  messages JSON,
  use_multiple_messages BOOLEAN DEFAULT FALSE,
  file_name VARCHAR(255),
  file_base64 LONGTEXT,
  scheduled_date_time TIMESTAMP NOT NULL,
  interval_min INT DEFAULT 60,
  interval_max INT DEFAULT 120,
  use_multiple_instances BOOLEAN DEFAULT FALSE,
  randomize_instances BOOLEAN DEFAULT TRUE,
  status VARCHAR(20) DEFAULT 'scheduled',
  total_messages INT DEFAULT 0,
  sent_messages INT DEFAULT 0,
  failed_messages INT DEFAULT 0,
  started_at TIMESTAMP NULL,
  completed_at TIMESTAMP NULL,
  error_message TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);